<!-- Share configuration related to this particular Share module extension, such as:
     - Doclib action config
     - Form config
     - Aspect and Type config
     - Advanced Search

    Note. Any configuration related to the whole Share.war webapp
           (i.e. not specific to this share extension) should be
            placed in the environment specific config file:
             alfresco/tomcat/shared/classes/alfresco/web-extension/share-config-custom.xml
     -->
<alfresco-config>
    <!--================================================================================================================
            Make custom types and aspects visible in "Change Type" and "Manage Aspects" actions.
             This will also make them visible when creating rules.
            (will be merged with out-of-the-box configured types and aspects)
        =============================================================================================================-->

    <config evaluator="string-compare" condition="DocumentLibrary">
        <types>
            <type name="cm:content">
                <subtype name="bookpub:bookFile"/>
            </type>
            <type name="cm:folder">
                <subtype name="bookpub:bookFolder"/>
                <subtype name="bookpub:chapterFolder"/>
            </type>
        </types>

        <indicators>
            <indicator id="indicator.doclib.action.bookWebPublished"
                       icon="book-publish-16.png"
                       index="100"
                       label="indicator.label.doclib.action.bookWebPublished">
                <evaluator>evaluator.doclib.indicator.bookFolderType</evaluator>
                <evaluator>evaluator.doclib.indicator.bookFolderPublished</evaluator>
            </indicator>
        </indicators>
    </config>

    <!--================================================================================================================
          Load any custom JavaScript files with DocLib implementations etc.
      =============================================================================================================-->

    <config evaluator="string-compare" condition="DocLibCustom">
        <dependencies>
            <js src="content-model-ui/js/custom-actions.js"/> <!-- Load custom doc lib actions -->
        </dependencies>
        <dependencies/>
    </config>

    <!--================================================================================================================
          Advanced Search Forms for types
          (search forms for aspects are not available)
      =============================================================================================================-->

    <config evaluator="string-compare" condition="AdvancedSearch" replace="true">
        <advanced-search>
            <forms>
                <!-- Standard out-of-the-box types -->
                <form labelId="search.form.label.cm_content" descriptionId="search.form.desc.cm_content">cm:content
                </form>
                <form labelId="search.form.label.cm_folder" descriptionId="search.form.desc.cm_folder">cm:folder</form>

                <!-- Custom type -->
                <form labelId="form.label.advancedsearch.bookFolder"
                      descriptionId="form.description.advancedsearch.bookFolder">bookpub:bookFolder
                </form>
                <form labelId="form.label.advancedsearch.bookFile"
                      descriptionId="form.description.advancedsearch.bookFile">bookpub:bookFile
                </form>
            </forms>
        </advanced-search>
    </config>

    <!--================================================================================================================
             Document Library Actions
         =============================================================================================================-->

    <config evaluator="string-compare" condition="DocLibActions">
        <actions>
            <!-- Add custom evaluator to Delete Folder action so we can hide it for Chapter folders,
                 deleting such a folder requires custom functionality -->
            <action id="document-delete" type="javascript" label="actions.document.delete">
                <param name="function">onActionDelete</param>
                <permissions>
                    <permission allow="true">Delete</permission>
                </permissions>
                <evaluator>evaluator.doclib.action.editableByCurrentUser</evaluator>
                <evaluator>evaluator.doclib.action.isNotPartOfHybridWorklfow</evaluator>
                <evaluator>evaluator.doclib.action.isDeletable</evaluator>
                <evaluator negate="true">evaluator.doclib.indicator.chapterFolderType</evaluator>
            </action>

            <!-- Custom Best Publishing DocLib actions -->
            <action id="bestpub.doclib.action.publishContentToWeb"
                    icon="document-publish"
                    type="javascript"
                    label="doclib.action.label.publish.to.web">
                <param name="function">onActionPublishToWeb</param>
                <param name="successMessage">message.publish-web.success</param>
                <param name="failureMessage">message.publish-web.failure</param>
                <evaluator>evaluator.doclib.indicator.bookFolderType</evaluator>
                <evaluator>evaluator.doclib.indicator.bookFolderPublished</evaluator>
                <evaluator>evaluator.doclib.indicator.isMetadataUpdated</evaluator>
            </action>
            <action id="bestpub.doclib.action.createChapterFolder"
                    icon="chapter-create"
                    type="javascript"
                    label="doclib.action.label.create.chapter.folder">
                <param name="function">onActionFormDialog</param>
                <!-- calling the following alfresco repo action after the form has been submitted -->
                <param name="itemKind">action</param>
                <param name="itemId">org.maversolutions.bestpub.actions.createChapterAction</param>
                <param name="mode">create</param>
                <param name="destination">{node.nodeRef}</param>
                <param name="successMessage">message.create-chapter-folder.success</param>
                <param name="failureMessage">message.create-chapter-folder.failure</param>
                <permissions>
                    <permission allow="true">Write</permission>
                </permissions>
                <evaluator>evaluator.doclib.indicator.bookFolderType</evaluator>
            </action>
            <action id="bestpub.doclib.action.deleteChapterFolder"
                    icon="chapter-delete"
                    type="javascript"
                    label="doclib.action.label.delete.chapter.folder">
                <param name="function">onDeleteChapter</param>
                <param name="successMessage">message.delete-chapter-folder.success</param>
                <param name="failureMessage">message.delete-chapter-folder.failure</param>
                <permissions>
                    <permission allow="true">Delete</permission>
                </permissions>
                <evaluator>evaluator.doclib.indicator.chapterFolderType</evaluator>
            </action>
        </actions>
        <actionGroups>
            <actionGroup id="folder-browse">
                <action index="700" id="bestpub.doclib.action.publishContentToWeb"/>
                <action index="701" id="bestpub.doclib.action.createChapterFolder"/>
                <action index="702" id="bestpub.doclib.action.deleteChapterFolder"/>
            </actionGroup>
            <actionGroup id="folder-details">
                <action index="700" id="bestpub.doclib.action.publishContentToWeb"/>
                <action index="701" id="bestpub.doclib.action.createChapterFolder"/>
                <action index="702" id="bestpub.doclib.action.deleteChapterFolder"/>
            </actionGroup>
        </actionGroups>
    </config>

    <!--================================================================================================================
         View, Edit, Create, and Search forms for custom types

         The following form configurations for the custom types
         have not been created from scratch. We have instead copied
         out-of-the-box form configurations for cm:content and cm:folder
         from the tomcat/webapps/share/WEB-INF/classes/alfresco/share-form-config.xml file
         in a standard Alfresco installation (with the version matching)
         and used them as a starting point.

        =============================================================================================================-->

    <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
             Book Folder Forms
         ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

    <!-- View and edit forms for Book Folder type -->
    <config evaluator="node-type" condition="bookpub:bookFolder">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />

                    <show id="cm:creator" for-mode="view" />
                    <show id="cm:created" for-mode="view" />
                    <show id="cm:modifier" for-mode="view" />
                    <show id="cm:modified" for-mode="view" />

                    <!-- cm:ownable aspect -->
                    <show id="cm:owner" />

                    <!-- tags and categories -->
                    <show id="cm:taggable" for-mode="edit" force="true" />
                    <show id="cm:categories" />

                    <!-- emailserver:aliasable aspect -->
                    <show id="emailserver:alias" />

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookTitle"/>
                    <show id="bookpub:bookGenre"/>
                    <show id="bookpub:bookAuthors" />
                    <show id="bookpub:nrOfPages" for-mode="view"/>
                    <show id="bookpub:nrOfChapters" for-mode="view"/>
                    <show id="bookpub:bookMetadataStatus" for-mode="view"/>
                    <show id="bookpub:bookProductionStatus" for-mode="view"/>
                    <show id="bookpub:webPublishedDate" for-mode="view"/>
                    <show id="bookpub:webPublishedVersion" for-mode="view"/>
                    <show id="bookpub:webServerDeliveryOK"/>
                </field-visibility>
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookAuthors" label-id="form.label.bookAuthors" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:nrOfPages" label-id="form.label.nrOfPages" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:nrOfChapters" label-id="form.label.nrOfChapters" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookMetadataStatus" label-id="form.label.bookMetadataStatus" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookProductionStatus" label-id="form.label.bookProductionStatus" set="bookInfoset" read-only="true"/>

                    <set id="publishingInfoSet" appearance="bordered-panel" label-id="form.webPublishingInfo"/>
                    <field id="bookpub:webPublishedDate" label-id="form.label.webPublishedDate" set="publishingInfoSet" read-only="true"/>
                    <field id="bookpub:webPublishedVersion" label-id="form.label.webPublishedVersion" set="publishingInfoSet" read-only="true"/>
                    <field id="bookpub:webServerDeliveryOK" label-id="form.label.webServerDeliveryOK" set="publishingInfoSet" read-only="true"/>
                </appearance>
            </form>
        </forms>
    </config>

    <!-- Search form for Book Folder type -->
    <config evaluator="model-type" condition="bookpub:bookFolder">
        <forms>
            <form id="search">
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN"/>
                    <show id="bookpub:bookTitle"/>
                    <show id="bookpub:bookGenre"/>
                    <show id="bookpub:bookAuthors" />
                    <show id="bookpub:bookMetadataStatus"/>
                    <show id="bookpub:bookProductionStatus"/>
                    <show id="bookpub:webPublishedDate"/>
                    <show id="bookpub:webPublishedVersion"/>
                </field-visibility>
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" />
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" />
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" />
                    <field id="bookpub:bookAuthors" label-id="form.label.bookAuthors" set="bookInfoset" />
                    <field id="bookpub:bookMetadataStatus" label-id="form.label.bookMetadataStatus" set="bookInfoset" />
                    <field id="bookpub:bookProductionStatus" label-id="form.label.bookProductionStatus" set="bookInfoset" />

                    <set id="publishingInfoSet" appearance="bordered-panel" label-id="form.webPublishingInfo"/>
                    <field id="bookpub:webPublishedDate" label-id="form.label.webPublishedDate" set="publishingInfoSet" />
                    <field id="bookpub:webPublishedVersion" label-id="form.label.webPublishedVersion" set="publishingInfoSet" />
                </appearance>
            </form>
        </forms>
    </config>

    <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
             Chapter Folder Forms
         ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

    <!-- View and edit forms for Chapter Folder type -->
    <config evaluator="node-type" condition="bookpub:chapterFolder">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />

                    <show id="cm:creator" for-mode="view" />
                    <show id="cm:created" for-mode="view" />
                    <show id="cm:modifier" for-mode="view" />
                    <show id="cm:modified" for-mode="view" />

                    <!-- cm:ownable aspect -->
                    <show id="cm:owner" />

                    <!-- tags and categories -->
                    <show id="cm:taggable" for-mode="edit" force="true" />
                    <show id="cm:categories" />

                    <!-- emailserver:aliasable aspect -->
                    <show id="emailserver:alias" />

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:chapterNumber" for-mode="view"/>
                    <show id="bookpub:chapterAuthor" for-mode="view"/>
                    <show id="bookpub:chapterTitle" for-mode="view"/>
                    <show id="bookpub:chapterMetadataStatus" for-mode="view"/>
                </field-visibility>
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>

                    <set id="chapterInfoSet" appearance="bordered-panel" label-id="form.chapterInfo"/>
                    <field id="bookpub:chapterNumber" label-id="form.label.chapterNumber" set="chapterInfoSet" read-only="true"/>
                    <field id="bookpub:chapterAuthor" label-id="form.label.chapterAuthor" set="chapterInfoSet" />
                    <field id="bookpub:chapterTitle" label-id="form.label.chapterTitle" set="chapterInfoSet" read-only="true"/>
                    <field id="bookpub:chapterMetadataStatus" label-id="form.label.chapterMetadataStatus" set="chapterInfoSet" read-only="true"/>
                </appearance>
            </form>
        </forms>
    </config>

    <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
             Book File Forms
         ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

    <!-- View and edit forms for Book File type -->
    <config evaluator="node-type" condition="bookpub:bookFile">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />
                    <show id="mimetype" />
                    <show id="cm:author" force="true" />
                    <show id="size" for-mode="view" />
                    <show id="cm:creator" for-mode="view" />
                    <show id="cm:created" for-mode="view" />
                    <show id="cm:modifier" for-mode="view" />
                    <show id="cm:modified" for-mode="view" />

                    <!-- tags and categories -->
                    <show id="cm:taggable" for-mode="edit" force="true" />
                    <show id="cm:categories" />

                    <!-- cm:dublincore aspect -->
                    <show id="cm:publisher"/>
                    <show id="cm:contributor"/>
                    <show id="cm:type"/>
                    <show id="cm:identifier"/>
                    <show id="cm:dcsource"/>
                    <show id="cm:coverage"/>
                    <show id="cm:rights"/>
                    <show id="cm:subject"/>

                    <!-- cm:complianceable aspect -->
                    <show id="cm:removeAfter" />

                    <!-- cm:effectivity aspect -->
                    <show id="cm:from"/>
                    <show id="cm:to"/>

                    <!--  cm:summarizable aspect -->
                    <show id="cm:summary" />

                    <!-- cm:translatable aspect -->
                    <show id="cm:translations" />

                    <!-- cm:localizable aspect -->
                    <show id="cm:locale" />

                    <!-- cm:ownable aspect -->
                    <show id="cm:owner" />

                    <!-- cm:attachable aspect -->
                    <show id="cm:attachments" />

                    <!-- cm:emailed aspect -->
                    <show id="cm:originator" />
                    <show id="cm:addressee" />
                    <show id="cm:addressees" />
                    <show id="cm:sentdate" />
                    <show id="cm:subjectline" />

                    <!-- exif:exif aspect -->
                    <show id="exif:dateTimeOriginal" />
                    <show id="exif:pixelXDimension" />
                    <show id="exif:pixelYDimension" />
                    <show id="exif:exposureTime" />
                    <show id="exif:fNumber" />
                    <show id="exif:flash" />
                    <show id="exif:focalLength" />
                    <show id="exif:isoSpeedRatings" />
                    <show id="exif:manufacturer" />
                    <show id="exif:model" />
                    <show id="exif:software" />
                    <show id="exif:orientation" />
                    <show id="exif:xResolution" />
                    <show id="exif:yResolution" />
                    <show id="exif:resolutionUnit" />

                    <!-- audio:audio aspect -->
                    <show id="audio:album" />
                    <show id="audio:artist" />
                    <show id="audio:composer" />
                    <show id="audio:engineer" />
                    <show id="audio:genre" />
                    <show id="audio:trackNumber" />
                    <show id="audio:releaseDate" />
                    <show id="audio:sampleRate" />
                    <show id="audio:sampleType" />
                    <show id="audio:channelType" />
                    <show id="audio:compressor" />

                    <!-- cm:indexControl aspect -->
                    <show id="cm:isIndexed" />
                    <show id="cm:isContentIndexed" />

                    <!-- cm:geographic aspect -->
                    <show id="cm:latitude" />
                    <show id="cm:longitude" />

                    <!-- surf:widget aspect -->
                    <show id="surf:widgetType"/>
                    <show id="surf:mid"/>
                    <show id="surf:label"/>

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                    <show id="bookpub:bookAuthors" for-mode="view"/>
                    <show id="bookpub:nrOfPages" for-mode="view"/>
                    <show id="bookpub:nrOfChapters" for-mode="view"/>
                </field-visibility>
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookAuthors" label-id="form.label.bookAuthors" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:nrOfPages" label-id="form.label.nrOfPages" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:nrOfChapters" label-id="form.label.nrOfChapters" set="bookInfoset" read-only="true"/>
                </appearance>
            </form>

            <!-- Document Library pop-up Edit Metadata form -->
            <form id="doclib-simple-metadata">
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />
                    <!-- tags and categories -->
                    <show id="cm:taggable" for-mode="edit" force="true" />
                    <show id="cm:categories" />

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                    <show id="bookpub:bookAuthors" for-mode="view"/>
                    <show id="bookpub:nrOfPages" for-mode="view"/>
                    <show id="bookpub:nrOfChapters" for-mode="view"/>
                </field-visibility>
                <edit-form template="../documentlibrary/forms/doclib-simple-metadata.ftl" />
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookAuthors" label-id="form.label.bookAuthors" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:nrOfPages" label-id="form.label.nrOfPages" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:nrOfChapters" label-id="form.label.nrOfChapters" set="bookInfoset" read-only="true"/>
                </appearance>
            </form>

            <!-- Document Library Inline Edit form -->
            <form id="doclib-inline-edit">
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:content" force="true" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                    <show id="bookpub:bookAuthors" for-mode="view"/>
                    <show id="bookpub:nrOfPages" for-mode="view"/>
                    <show id="bookpub:nrOfChapters" for-mode="view"/>
                </field-visibility>
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookAuthors" label-id="form.label.bookAuthors" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:nrOfPages" label-id="form.label.nrOfPages" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:nrOfChapters" label-id="form.label.nrOfChapters" set="bookInfoset" read-only="true"/>
                </appearance>
            </form>
        </forms>
    </config>

    <!-- Search form for Book File type -->
    <config evaluator="model-type" condition="bookpub:bookFile">
        <forms>
            <form id="search">
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />
                    <show id="mimetype" />
                    <show id="cm:modified" />
                    <show id="cm:modifier" />

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" />
                    <show id="bookpub:bookTitle" />
                    <show id="bookpub:bookGenre" />
                    <show id="bookpub:bookAuthors" />
                </field-visibility>
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" />
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" />
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" />
                    <field id="bookpub:bookAuthors" label-id="form.label.bookAuthors" set="bookInfoset" read-only="true"/>
                </appearance>
            </form>
        </forms>
    </config>

    <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
             Chapter File Forms
         ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

    <!-- View and edit forms for Chapter File type -->
    <config evaluator="node-type" condition="bookpub:chapterFile">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />
                    <show id="mimetype" />
                    <show id="cm:author" force="true" />
                    <show id="size" for-mode="view" />
                    <show id="cm:creator" for-mode="view" />
                    <show id="cm:created" for-mode="view" />
                    <show id="cm:modifier" for-mode="view" />
                    <show id="cm:modified" for-mode="view" />

                    <!-- tags and categories -->
                    <show id="cm:taggable" for-mode="edit" force="true" />
                    <show id="cm:categories" />

                    <!-- cm:dublincore aspect -->
                    <show id="cm:publisher"/>
                    <show id="cm:contributor"/>
                    <show id="cm:type"/>
                    <show id="cm:identifier"/>
                    <show id="cm:dcsource"/>
                    <show id="cm:coverage"/>
                    <show id="cm:rights"/>
                    <show id="cm:subject"/>

                    <!-- cm:complianceable aspect -->
                    <show id="cm:removeAfter" />

                    <!-- cm:effectivity aspect -->
                    <show id="cm:from"/>
                    <show id="cm:to"/>

                    <!--  cm:summarizable aspect -->
                    <show id="cm:summary" />

                    <!-- cm:translatable aspect -->
                    <show id="cm:translations" />

                    <!-- cm:localizable aspect -->
                    <show id="cm:locale" />

                    <!-- cm:ownable aspect -->
                    <show id="cm:owner" />

                    <!-- cm:attachable aspect -->
                    <show id="cm:attachments" />

                    <!-- cm:emailed aspect -->
                    <show id="cm:originator" />
                    <show id="cm:addressee" />
                    <show id="cm:addressees" />
                    <show id="cm:sentdate" />
                    <show id="cm:subjectline" />

                    <!-- exif:exif aspect -->
                    <show id="exif:dateTimeOriginal" />
                    <show id="exif:pixelXDimension" />
                    <show id="exif:pixelYDimension" />
                    <show id="exif:exposureTime" />
                    <show id="exif:fNumber" />
                    <show id="exif:flash" />
                    <show id="exif:focalLength" />
                    <show id="exif:isoSpeedRatings" />
                    <show id="exif:manufacturer" />
                    <show id="exif:model" />
                    <show id="exif:software" />
                    <show id="exif:orientation" />
                    <show id="exif:xResolution" />
                    <show id="exif:yResolution" />
                    <show id="exif:resolutionUnit" />

                    <!-- audio:audio aspect -->
                    <show id="audio:album" />
                    <show id="audio:artist" />
                    <show id="audio:composer" />
                    <show id="audio:engineer" />
                    <show id="audio:genre" />
                    <show id="audio:trackNumber" />
                    <show id="audio:releaseDate" />
                    <show id="audio:sampleRate" />
                    <show id="audio:sampleType" />
                    <show id="audio:channelType" />
                    <show id="audio:compressor" />

                    <!-- cm:indexControl aspect -->
                    <show id="cm:isIndexed" />
                    <show id="cm:isContentIndexed" />

                    <!-- cm:geographic aspect -->
                    <show id="cm:latitude" />
                    <show id="cm:longitude" />

                    <!-- surf:widget aspect -->
                    <show id="surf:widgetType"/>
                    <show id="surf:mid"/>
                    <show id="surf:label"/>

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:chapterNumber" for-mode="view"/>
                    <show id="bookpub:chapterAuthor" for-mode="view"/>
                    <show id="bookpub:chapterTitle" for-mode="view"/>
                    <show id="bookpub:chapterMetadataStatus" for-mode="view"/>
                </field-visibility>
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>

                    <set id="chapterInfoSet" appearance="bordered-panel" label-id="form.chapterInfo"/>
                    <field id="bookpub:chapterNumber" label-id="form.label.chapterNumber" set="chapterInfoSet" read-only="true"/>
                    <field id="bookpub:chapterAuthor" label-id="form.label.chapterAuthor" set="chapterInfoSet" />
                    <field id="bookpub:chapterTitle" label-id="form.label.chapterTitle" set="chapterInfoSet" read-only="true"/>
                    <field id="bookpub:chapterMetadataStatus" label-id="form.label.chapterMetadataStatus" set="chapterInfoSet" read-only="true"/>
                </appearance>
            </form>

            <!-- Document Library pop-up Edit Metadata form -->
            <form id="doclib-simple-metadata">
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />
                    <!-- tags and categories -->
                    <show id="cm:taggable" for-mode="edit" force="true" />
                    <show id="cm:categories" />

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:chapterNumber" for-mode="view"/>
                    <show id="bookpub:chapterAuthor" for-mode="view"/>
                    <show id="bookpub:chapterTitle" for-mode="view"/>
                    <show id="bookpub:chapterMetadataStatus" for-mode="view"/>
                </field-visibility>
                <edit-form template="../documentlibrary/forms/doclib-simple-metadata.ftl" />
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>

                    <set id="chapterInfoSet" appearance="bordered-panel" label-id="form.chapterInfo"/>
                    <field id="bookpub:chapterNumber" label-id="form.label.chapterNumber" set="chapterInfoSet" read-only="true"/>
                    <field id="bookpub:chapterAuthor" label-id="form.label.chapterAuthor" set="chapterInfoSet" />
                    <field id="bookpub:chapterTitle" label-id="form.label.chapterTitle" set="chapterInfoSet" read-only="true"/>
                    <field id="bookpub:chapterMetadataStatus" label-id="form.label.chapterMetadataStatus" set="chapterInfoSet" read-only="true"/>
                </appearance>
            </form>

            <!-- Document Library Inline Edit form -->
            <form id="doclib-inline-edit">
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:content" force="true" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:chapterNumber" for-mode="view"/>
                    <show id="bookpub:chapterAuthor" for-mode="view"/>
                    <show id="bookpub:chapterTitle" for-mode="view"/>
                    <show id="bookpub:chapterMetadataStatus" for-mode="view"/>
                </field-visibility>
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>

                    <set id="chapterInfoSet" appearance="bordered-panel" label-id="form.chapterInfo"/>
                    <field id="bookpub:chapterNumber" label-id="form.label.chapterNumber" set="chapterInfoSet" read-only="true"/>
                    <field id="bookpub:chapterAuthor" label-id="form.label.chapterAuthor" set="chapterInfoSet" />
                    <field id="bookpub:chapterTitle" label-id="form.label.chapterTitle" set="chapterInfoSet" read-only="true"/>
                    <field id="bookpub:chapterMetadataStatus" label-id="form.label.chapterMetadataStatus" set="chapterInfoSet" read-only="true"/>
                </appearance>
            </form>
        </forms>
    </config>

    <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
             Artwork File Forms
         ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

    <!-- View and edit forms for Artwork File type -->
    <config evaluator="node-type" condition="bookpub:artworkFile">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />
                    <show id="mimetype" />
                    <show id="cm:author" force="true" />
                    <show id="size" for-mode="view" />
                    <show id="cm:creator" for-mode="view" />
                    <show id="cm:created" for-mode="view" />
                    <show id="cm:modifier" for-mode="view" />
                    <show id="cm:modified" for-mode="view" />

                    <!-- tags and categories -->
                    <show id="cm:taggable" for-mode="edit" force="true" />
                    <show id="cm:categories" />

                    <!-- cm:dublincore aspect -->
                    <show id="cm:publisher"/>
                    <show id="cm:contributor"/>
                    <show id="cm:type"/>
                    <show id="cm:identifier"/>
                    <show id="cm:dcsource"/>
                    <show id="cm:coverage"/>
                    <show id="cm:rights"/>
                    <show id="cm:subject"/>

                    <!-- cm:complianceable aspect -->
                    <show id="cm:removeAfter" />

                    <!-- cm:effectivity aspect -->
                    <show id="cm:from"/>
                    <show id="cm:to"/>

                    <!--  cm:summarizable aspect -->
                    <show id="cm:summary" />

                    <!-- cm:translatable aspect -->
                    <show id="cm:translations" />

                    <!-- cm:localizable aspect -->
                    <show id="cm:locale" />

                    <!-- cm:ownable aspect -->
                    <show id="cm:owner" />

                    <!-- cm:attachable aspect -->
                    <show id="cm:attachments" />

                    <!-- cm:emailed aspect -->
                    <show id="cm:originator" />
                    <show id="cm:addressee" />
                    <show id="cm:addressees" />
                    <show id="cm:sentdate" />
                    <show id="cm:subjectline" />

                    <!-- exif:exif aspect -->
                    <show id="exif:dateTimeOriginal" />
                    <show id="exif:pixelXDimension" />
                    <show id="exif:pixelYDimension" />
                    <show id="exif:exposureTime" />
                    <show id="exif:fNumber" />
                    <show id="exif:flash" />
                    <show id="exif:focalLength" />
                    <show id="exif:isoSpeedRatings" />
                    <show id="exif:manufacturer" />
                    <show id="exif:model" />
                    <show id="exif:software" />
                    <show id="exif:orientation" />
                    <show id="exif:xResolution" />
                    <show id="exif:yResolution" />
                    <show id="exif:resolutionUnit" />

                    <!-- audio:audio aspect -->
                    <show id="audio:album" />
                    <show id="audio:artist" />
                    <show id="audio:composer" />
                    <show id="audio:engineer" />
                    <show id="audio:genre" />
                    <show id="audio:trackNumber" />
                    <show id="audio:releaseDate" />
                    <show id="audio:sampleRate" />
                    <show id="audio:sampleType" />
                    <show id="audio:channelType" />
                    <show id="audio:compressor" />

                    <!-- cm:indexControl aspect -->
                    <show id="cm:isIndexed" />
                    <show id="cm:isContentIndexed" />

                    <!-- cm:geographic aspect -->
                    <show id="cm:latitude" />
                    <show id="cm:longitude" />

                    <!-- surf:widget aspect -->
                    <show id="surf:widgetType"/>
                    <show id="surf:mid"/>
                    <show id="surf:label"/>

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                </field-visibility>
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>
                </appearance>
            </form>

            <!-- Document Library pop-up Edit Metadata form -->
            <form id="doclib-simple-metadata">
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />
                    <!-- tags and categories -->
                    <show id="cm:taggable" for-mode="edit" force="true" />
                    <show id="cm:categories" />

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                </field-visibility>
                <edit-form template="../documentlibrary/forms/doclib-simple-metadata.ftl" />
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>
                </appearance>
            </form>

            <!-- Document Library Inline Edit form -->
            <form id="doclib-inline-edit">
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:content" force="true" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                </field-visibility>
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>
                </appearance>
            </form>
        </forms>
    </config>

    <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
             Supplementary File Forms
         ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

    <!-- View and edit forms for Supplementary File type -->
    <config evaluator="node-type" condition="bookpub:supplementaryFile">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />
                    <show id="mimetype" />
                    <show id="cm:author" force="true" />
                    <show id="size" for-mode="view" />
                    <show id="cm:creator" for-mode="view" />
                    <show id="cm:created" for-mode="view" />
                    <show id="cm:modifier" for-mode="view" />
                    <show id="cm:modified" for-mode="view" />

                    <!-- tags and categories -->
                    <show id="cm:taggable" for-mode="edit" force="true" />
                    <show id="cm:categories" />

                    <!-- cm:dublincore aspect -->
                    <show id="cm:publisher"/>
                    <show id="cm:contributor"/>
                    <show id="cm:type"/>
                    <show id="cm:identifier"/>
                    <show id="cm:dcsource"/>
                    <show id="cm:coverage"/>
                    <show id="cm:rights"/>
                    <show id="cm:subject"/>

                    <!-- cm:complianceable aspect -->
                    <show id="cm:removeAfter" />

                    <!-- cm:effectivity aspect -->
                    <show id="cm:from"/>
                    <show id="cm:to"/>

                    <!--  cm:summarizable aspect -->
                    <show id="cm:summary" />

                    <!-- cm:translatable aspect -->
                    <show id="cm:translations" />

                    <!-- cm:localizable aspect -->
                    <show id="cm:locale" />

                    <!-- cm:ownable aspect -->
                    <show id="cm:owner" />

                    <!-- cm:attachable aspect -->
                    <show id="cm:attachments" />

                    <!-- cm:emailed aspect -->
                    <show id="cm:originator" />
                    <show id="cm:addressee" />
                    <show id="cm:addressees" />
                    <show id="cm:sentdate" />
                    <show id="cm:subjectline" />

                    <!-- exif:exif aspect -->
                    <show id="exif:dateTimeOriginal" />
                    <show id="exif:pixelXDimension" />
                    <show id="exif:pixelYDimension" />
                    <show id="exif:exposureTime" />
                    <show id="exif:fNumber" />
                    <show id="exif:flash" />
                    <show id="exif:focalLength" />
                    <show id="exif:isoSpeedRatings" />
                    <show id="exif:manufacturer" />
                    <show id="exif:model" />
                    <show id="exif:software" />
                    <show id="exif:orientation" />
                    <show id="exif:xResolution" />
                    <show id="exif:yResolution" />
                    <show id="exif:resolutionUnit" />

                    <!-- audio:audio aspect -->
                    <show id="audio:album" />
                    <show id="audio:artist" />
                    <show id="audio:composer" />
                    <show id="audio:engineer" />
                    <show id="audio:genre" />
                    <show id="audio:trackNumber" />
                    <show id="audio:releaseDate" />
                    <show id="audio:sampleRate" />
                    <show id="audio:sampleType" />
                    <show id="audio:channelType" />
                    <show id="audio:compressor" />

                    <!-- cm:indexControl aspect -->
                    <show id="cm:isIndexed" />
                    <show id="cm:isContentIndexed" />

                    <!-- cm:geographic aspect -->
                    <show id="cm:latitude" />
                    <show id="cm:longitude" />

                    <!-- surf:widget aspect -->
                    <show id="surf:widgetType"/>
                    <show id="surf:mid"/>
                    <show id="surf:label"/>

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                </field-visibility>
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>
                </appearance>
            </form>

            <!-- Document Library pop-up Edit Metadata form -->
            <form id="doclib-simple-metadata">
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />
                    <!-- tags and categories -->
                    <show id="cm:taggable" for-mode="edit" force="true" />
                    <show id="cm:categories" />

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                </field-visibility>
                <edit-form template="../documentlibrary/forms/doclib-simple-metadata.ftl" />
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>
                </appearance>
            </form>

            <!-- Document Library Inline Edit form -->
            <form id="doclib-inline-edit">
                <field-visibility>
                    <show id="cm:name" />
                    <show id="cm:content" force="true" />
                    <show id="cm:title" force="true" />
                    <show id="cm:description" force="true" />

                    <!-- ADDED custom metadata -->
                    <show id="bookpub:ISBN" for-mode="view"/>
                    <show id="bookpub:bookTitle" for-mode="view"/>
                    <show id="bookpub:bookGenre" for-mode="view"/>
                </field-visibility>
                <appearance>
                    <!-- UPDATED appearance -->
                    <set id="bookInfoset" appearance="bordered-panel" label-id="form.bookinfo"/>
                    <field id="bookpub:ISBN" label-id="form.label.isbn" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookTitle" label-id="form.label.booktitle" set="bookInfoset" read-only="true"/>
                    <field id="bookpub:bookGenre" label-id="form.label.bookGenre" set="bookInfoset" read-only="true"/>
                </appearance>
            </form>
        </forms>
    </config>

</alfresco-config>